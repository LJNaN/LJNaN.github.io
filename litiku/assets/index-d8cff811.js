import{L as B,a as w,R as G,B as E}from"./Bottom-bd1211e4.js";import{_ as $,r as y,o as I,h as T,a as r,c as C,w as g,i as f,b as t,d as h,e as x,n as M,t as c,u,F as q,g as R,q as P,m as O,f as j,s as z,L as H,l as V,j as W,v as Y,p as J,k as K,x as Q,y as U}from"./index-d4e27922.js";const X={class:"chunk1-body"},Z=["src"],tt=["src"],et={class:"chunk2-body"},at={class:"chunk2-row"},st={class:"chunk2-item"},ot=["src"],ct={class:"chunk2-item"},it=["src"],nt={class:"chunk2-row"},lt={class:"chunk2-item"},ut=["src"],rt={class:"chunk2-item"},_t=["src"],dt={class:"chunk2-row"},mt={class:"chunk2-item"},ht=["src"],pt={class:"chunk2-item"},ft=["src"],vt={class:"chunk3-body"},gt=["src"],Dt={class:"chunk3-item-statusText"},bt={class:"chunk3-item-bigText"},yt=["src"],kt={__name:"left",setup(n){const{appContext:{app:{config:{globalProperties:{$isOurSite:_}}}}}=R();let d=y([]);const k=[{color:"#FF9C00",text:"使用"},{color:"#FFFFFF",text:"空闲"},{color:"#FF0404",text:"故障"}];function v(){let o={};w.get("/api/GetStacker").then(i=>{o=i}).catch(()=>{o={data:{code:200,message:[{D_Name:"堆垛机17",D_Status:"使用"},{D_Name:"堆垛机10",D_Status:"使用"},{D_Name:"堆垛机11",D_Status:"使用"},{D_Name:"堆垛机12",D_Status:"使用"},{D_Name:"堆垛机13",D_Status:"使用"},{D_Name:"堆垛机14",D_Status:"使用"},{D_Name:"堆垛机15",D_Status:"使用"},{D_Name:"堆垛机16",D_Status:"使用"},{D_Name:"堆垛机18",D_Status:"使用"},{D_Name:"堆垛机1",D_Status:"使用"},{D_Name:"堆垛机2",D_Status:"使用"},{D_Name:"堆垛机3",D_Status:"使用"},{D_Name:"堆垛机4",D_Status:"使用"},{D_Name:"堆垛机5",D_Status:"使用"},{D_Name:"堆垛机6",D_Status:"使用"},{D_Name:"堆垛机7",D_Status:"使用"},{D_Name:"堆垛机8",D_Status:"使用"},{D_Name:"堆垛机9",D_Status:"使用"}]}}}).finally(()=>{_&&(o={data:{code:200,message:[{D_Name:"堆垛机17",D_Status:"使用"},{D_Name:"堆垛机10",D_Status:"使用"},{D_Name:"堆垛机11",D_Status:"使用"},{D_Name:"堆垛机12",D_Status:"使用"},{D_Name:"堆垛机13",D_Status:"使用"},{D_Name:"堆垛机14",D_Status:"使用"},{D_Name:"堆垛机15",D_Status:"使用"},{D_Name:"堆垛机16",D_Status:"使用"},{D_Name:"堆垛机18",D_Status:"使用"},{D_Name:"堆垛机1",D_Status:"使用"},{D_Name:"堆垛机2",D_Status:"使用"},{D_Name:"堆垛机3",D_Status:"使用"},{D_Name:"堆垛机4",D_Status:"使用"},{D_Name:"堆垛机5",D_Status:"使用"},{D_Name:"堆垛机6",D_Status:"使用"},{D_Name:"堆垛机7",D_Status:"使用"},{D_Name:"堆垛机8",D_Status:"使用"},{D_Name:"堆垛机9",D_Status:"使用"}]}}),d.value=o.data.message.map(i=>{let a="";return i.D_Status==="使用"&&(a=2),{name:i.D_Name,status:a}})})}let s=y([{name:"机器人",value:"0"},{name:"堆垛机",value:"0"},{name:"入库线",value:"0"},{name:"多品分拣线",value:"0"},{name:"单品分拣线",value:"0"},{name:"空箱补给线",value:"0"}]);function b(){let o={};w.get("/api/GetEquipmentRatio").then(i=>{o=i}).catch(()=>{o={data:{code:200,message:{机器人:0,堆垛机:0,入库线:0,多品分拣线:0,单品分拣线:0,空箱补给线:0}}}}).finally(()=>{_&&(o={data:{code:200,message:{机器人:100,堆垛机:100,入库线:100,多品分拣线:100,单品分拣线:100,空箱补给线:100}}}),s.value[0].value=o.data.message.机器人,s.value[1].value=o.data.message.堆垛机,s.value[2].value=o.data.message.入库线,s.value[3].value=o.data.message.多品分拣线,s.value[4].value=o.data.message.单品分拣线,s.value[5].value=o.data.message.空箱补给线})}let D=y([]);function F(){let o={};w.get("/api/GetRobot").then(i=>{o=i}).catch(()=>{o={data:{code:200,message:[{D_Name:"机器人6",D_Status:"使用"},{D_Name:"机器人4",D_Status:"使用"},{D_Name:"机器人5",D_Status:"使用"},{D_Name:"机器人7",D_Status:"使用"},{D_Name:"机器人8",D_Status:"使用"},{D_Name:"机器人3",D_Status:"使用"},{D_Name:"机器人2",D_Status:"使用"},{D_Name:"机器人1",D_Status:"使用"}]}}}).finally(()=>{_&&(o={data:{code:200,message:[{D_Name:"机器人6",D_Status:"使用"},{D_Name:"机器人4",D_Status:"使用"},{D_Name:"机器人5",D_Status:"使用"},{D_Name:"机器人7",D_Status:"使用"},{D_Name:"机器人8",D_Status:"使用"},{D_Name:"机器人3",D_Status:"使用"},{D_Name:"机器人2",D_Status:"使用"},{D_Name:"机器人1",D_Status:"使用"}]}}),D.value=o.data.message.map(i=>{let a="";return i.D_Status==="使用"&&(a=2),{name:i.D_Name,status:a}})})}return I(()=>{v(),b(),F(),setInterval(()=>{v(),b(),F()},3e4)}),(o,i)=>{const a=T("card-chunk");return r(),C(B,{style:{height:"calc(100% - 6.21vh)"}},{default:g(()=>[f(a,{title:"堆垛机",class:"chunk1",moreText:k},{default:g(()=>[t("div",X,[(r(!0),h(q,null,x(u(d),e=>(r(),h("div",{key:e.id,class:"chunk1-item"},[t("img",{class:"chunk1-item-circular",src:"./assets/2d/images/equipmentOverview/circular"+e.status+".png"},null,8,Z),t("p",{style:M({color:e.status===3?"#F16969":e.status===1?"#FFFFFF":"#FF9C00"})},c(e.name),5),t("img",{class:"chunk1-item-bg",src:"./assets/2d/images/equipmentOverview/duiduoji"+e.status+".png"},null,8,tt)]))),128))])]),_:1}),f(a,{title:"设备效率",class:"chunk2"},{default:g(()=>[t("div",et,[t("div",at,[t("div",st,[t("img",{class:"chunk2-item-circular",src:"./assets/2d/images/equipmentOverview/efficiency4.png"},null,8,ot),t("p",null,c(u(s)[0].name),1),t("p",null,c(u(s)[0].value+"%"),1)]),t("div",ct,[t("img",{class:"chunk2-item-circular",src:"./assets/2d/images/equipmentOverview/efficiency1.png"},null,8,it),t("p",null,c(u(s)[1].name),1),t("p",null,c(u(s)[1].value+"%"),1)])]),t("div",nt,[t("div",lt,[t("img",{class:"chunk2-item-circular",src:"./assets/2d/images/equipmentOverview/efficiency2.png"},null,8,ut),t("p",null,c(u(s)[2].name),1),t("p",null,c(u(s)[2].value+"%"),1)]),t("div",rt,[t("img",{class:"chunk2-item-circular",src:"./assets/2d/images/equipmentOverview/efficiency3.png"},null,8,_t),t("p",null,c(u(s)[3].name),1),t("p",null,c(u(s)[3].value+"%"),1)])]),t("div",dt,[t("div",mt,[t("img",{class:"chunk2-item-circular",src:"./assets/2d/images/equipmentOverview/efficiency4.png"},null,8,ht),t("p",null,c(u(s)[4].name),1),t("p",null,c(u(s)[4].value+"%"),1)]),t("div",pt,[t("img",{class:"chunk2-item-circular",src:"./assets/2d/images/equipmentOverview/efficiency1.png"},null,8,ft),t("p",null,c(u(s)[5].name),1),t("p",null,c(u(s)[5].value+"%"),1)])])])]),_:1}),f(a,{title:"拣选机器人",class:"chunk3"},{default:g(()=>[t("div",vt,[(r(!0),h(q,null,x(u(D),e=>(r(),h("div",{key:e.id,class:"chunk3-item"},[t("img",{class:"chunk3-item-textBG",src:"./assets/2d/images/equipmentOverview/jianxuanbg.png"},null,8,gt),t("p",Dt,c(e.status===1?"使用中":e.status===2?"空闲":"故障"),1),t("p",bt,c(e.name),1),t("img",{class:"chunk3-item-bg",src:"./assets/2d/images/equipmentOverview/jianxuan"+e.status+".png"},null,8,yt)]))),128))])]),_:1})]),_:1})}}},St=$(kt,[["__scopeId","data-v-9536ee62"]]);const Nt={},wt={class:"main"},xt=P('<div class="circular" data-v-98cafa70></div><div class="circular" data-v-98cafa70></div><div class="circular" data-v-98cafa70></div><div class="circular" data-v-98cafa70></div><div class="circular" data-v-98cafa70></div><div class="circular" data-v-98cafa70></div>',6),qt=[xt];function $t(n,_){return r(),h("div",wt,qt)}const Ft=$(Nt,[["render",$t],["__scopeId","data-v-98cafa70"]]);function L(n,_){this.speed=_,typeof n=="string"?this.dom=document.querySelector(n):this.dom=n,this.dom.onwheel=function(d){d=d||window.event,d.wheelDeltaY>0?this.scrollTop-=30:this.scrollTop+=30,d.preventDefault()},this.Refresh()}L.prototype.count=function(){clearTimeout(this.MyMar),this.MyMar=setTimeout(()=>{this.Marquee(),this.count()},this.speed)};L.prototype.stopCount=function(){clearTimeout(this.MyMar)};L.prototype.Refresh=function(){const n=this;this.box1=this.dom.getElementsByTagName("*")[0],!(this.box1.offsetHeight<=this.dom.offsetHeight)&&(this.dom.onmouseover=function(){n.stopCount()},this.dom.onmouseout=function(){n.count()},this.box2=this.box1.cloneNode(!0),this.box2.style.top=this.box1.offsetHeight+"px",this.box2.style.position="absolute",this.dom.appendChild(this.box2),this.count())};L.prototype.Marquee=function(){this.box2.offsetTop-this.dom.scrollTop<0?this.dom.scrollTop-=this.box2.offsetHeight:this.dom.scrollTop+=1};const Lt={mounted(){this.lamp=new L(this.$refs.scroll,50)},updated(){this.lamp.Refresh()}},Tt={class:"marquee_wrapper"},Ct={class:"scroll_table",ref:"scroll"};function Ot(n,_,d,k,v,s){return r(),h("div",Tt,[t("div",null,[O(n.$slots,"thead",{},void 0,!0)]),t("div",Ct,[O(n.$slots,"tbody",{},void 0,!0)],512)])}const It=$(Lt,[["render",Ot],["__scopeId","data-v-d9fd8286"]]);const A=n=>(J("data-v-c3d6920c"),n=n(),K(),n),Mt={class:"chunk1-body"},Rt={class:"chunk1-item-value"},At={class:"chunk1-item-name"},Bt=["src"],Gt={key:0,class:"chunk2-body"},Et=A(()=>t("table",{class:"table",cellspacing:"0",style:{"margin-bottom":"0.1125rem"}},[t("colgroup",null,[t("col",{width:"33%"}),t("col",{width:"33%"}),t("col",{width:"33%"})]),t("thead",null,[t("tr",{class:"th_tr"},[t("th",{class:"th"},"时间"),t("th",{class:"th"},"报警设备"),t("th",{class:"th"},"备注")])])],-1)),Pt={class:"table table_wrapper tbody",cellspacing:"0"},jt=A(()=>t("colgroup",null,[t("col",{width:"33%"}),t("col",{width:"33%"}),t("col",{width:"33%"})],-1)),zt=["onClick"],Ht={class:"td"},Vt={class:"td"},Wt={class:"td"},Yt={class:"chunk3-body"},Jt={class:"chunk3-body-left"},Kt={__name:"right",setup(n){const{appContext:{app:{config:{globalProperties:{$isOurSite:_}}}}}=R();let d=y([]);function k(){let a={};w.get("/api/GetEquipmentCount").then(e=>{a=e}).catch(()=>{a={data:{code:200,message:{机器人:0,堆垛机:0,入库线:0,多品分拣线:0,单品分拣线:0,空箱补给线:0,库位:0}}}}).finally(()=>{_&&(a={data:{code:200,message:{机器人:8,堆垛机:18,入库线:1,多品分拣线:1,单品分拣线:1,空箱补给线:1,库位:45336}}});const e=[];for(let l in a.data.message)l!="空箱补给线"&&e.push({name:l,value:a.data.message[l]});d.value=e})}function v(a){Y("jxsb1")}let s=y([]),b=y(!1);function D(){let a={};w.get("/api/GetAbnormal").then(e=>{a=e}).catch(()=>{a={data:{code:200,message:[]}}}).finally(()=>{_&&(a={data:{code:200,message:{count:1704,data:[{equ:"设备1",describe:"异常1",date:"2022-12-2120:17:29"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:17:29"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:17:30"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:35"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:37"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:38"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:58"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:58"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:58"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:58"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:59"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:59"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:59"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:59"},{equ:"设备1",describe:"异常1",date:"2022-12-2120:18:59"}]}}}),b.value=!1,s.value=a.data.message.data,z(()=>{b.value=!0})})}const F=["#FB255D","#FF8C26","#FFF601","#29FF47","#38F2D1"];function o(){let a={};w.get("/api/GetAbnormalRatio").then(e=>{a=e}).catch(()=>{a={data:{code:200,message:[]}}}).finally(()=>{_&&(a={data:{code:200,message:[{equName:"设备1",total:7.981220657276995},{equName:"入库扫码",total:76.52582159624413},{equName:"平板侧扫站台",total:15.434272300469484},{equName:"手机侧扫站台",total:.05868544600938967}]}});const e=a.data.message;e.sort((l,S)=>l.total>S.total?-1:1),e.forEach(l=>{l.total=l.total.toFixed(2)});for(let l=0,S=e.length;l<5-S;l++)e.push({equName:"未知",total:"0.00"});i.faultTop5List.value=e.reverse(),i.faultTop5Chart()})}I(()=>{D(),k(),o(),i.faultTop5Chart(),setInterval(()=>{D(),k(),o()},3e4)});const i={faultTop5List:y([]),faultTop5Option:j({}),faultTop5Chart(){const a=i.faultTop5List.value,e=a.map(p=>p.total),l=a.map(p=>p.equName);for(let p=0;p<5;p++)l.push();const S=100;let m=[];for(let p=0;p<i.faultTop5List.value.length;p++)m.push(S);let N={grid:{left:"20%",right:"5%",bottom:"3%",top:"0%",containLabel:!1},xAxis:[{show:!1},{show:!1}],yAxis:[{show:!0,data:l,offset:0,align:"left",axisLabel:{lineHeight:-6,verticalAlign:"bottom",fontWeight:"bold",fontSize:12,padding:[0,-50,-8,0],color:"#FFF",align:"left",formatter:"设备 {value}"},axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1}},{show:!0,data:e,offset:0,axisLabel:{lineHeight:-6,verticalAlign:"bottom",fontWeight:"bold",fontSize:12,padding:[0,0,-8,-30],color:"#FFF"},axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1}}],tooltip:{trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(150,150,150,0.1)"}},formatter:function(p){return`设备 ${p[0].name}<br /> <span style="display:inline-block;margin-right:0.21vw;border-radius:0.52vw;width:0.52vw;height:1.03vh;background-color:rgba(239, 156, 0, 1);"></span> ${p[1].data}%`}},series:[{name:"满值",z:1,show:!0,type:"bar",xAxisIndex:1,barWidth:4,itemStyle:{color:"#56483c",borderColor:"#FFF",borderWidth:0,borderRadius:4},data:m},{name:"储存率",show:!0,type:"bar",xAxisIndex:1,barWidth:4,barGap:"-100%",itemStyle:{borderRadius:4,color:function(){return new H(0,0,1,0,[{offset:0,color:"rgba(239, 156, 0, 0)"},{offset:1,color:"rgba(239, 156, 0, 1)"}])}},label:{show:!1},labelLine:{show:!1},z:2,data:e,animationDelay:1e3,animationDuration:1e3}]};i.faultTop5Option.value=N}};return(a,e)=>{const l=T("card-chunk"),S=T("chart-view");return r(),C(G,{style:{height:"calc(100% - 6.21vh)"}},{default:g(()=>[f(l,{title:"设备概览",class:"chunk1"},{default:g(()=>[t("div",Mt,[(r(!0),h(q,null,x(u(d),(m,N)=>(r(),h("div",{key:N,class:"chunk1-item"},[t("p",Rt,c(m.value),1),t("p",At,c(m.name),1),t("img",{class:"chunk1-item-bg",src:"./assets/2d/images/equipmentOverview/overview"+(N+1)+".png"},null,8,Bt)]))),128))])]),_:1}),f(l,{title:"报警列表",class:"chunk2"},{default:g(()=>[u(b)?(r(),h("div",Gt,[f(It,{class:"chunk2-body-marquee"},{thead:g(()=>[Et]),tbody:g(()=>[t("table",Pt,[jt,t("tbody",null,[(r(!0),h(q,null,x(u(s),(m,N)=>(r(),h("tr",{class:"td_tr",key:N,onClick:p=>v(m)},[t("td",Ht,c(m.date),1),t("td",Vt,c(m.equ),1),t("td",Wt,c(m.describe),1)],8,zt))),128))])])]),_:1})])):V("",!0)]),_:1}),f(l,{title:"故障Top5",class:"chunk3"},{default:g(()=>[t("div",Yt,[t("div",Jt,[(r(),h(q,null,x(5,m=>t("div",{key:m,class:"chunk3-body-left-item"},[t("p",null,[W("TOP"),t("span",{style:M({color:F[m-1]})},c("0"+m),5)]),f(Ft,{class:"parallelogram"})])),64))]),f(S,{chartOption:i.faultTop5Option.value||{},"auto-tooltip":""},null,8,["chartOption"])])]),_:1})]),_:1})}}},Qt=$(Kt,[["__scopeId","data-v-c3d6920c"]]);const Ut={class:"main"},Xt=["onClick"],Zt={__name:"bottom",setup(n){let _=y(-1);const d=["入库分拣线","立体库","出库分拣线","拣选机器人","循环投料线"];function k(v){v===_.value&&(v=-1),_.value=v,U(v)}return(v,s)=>(r(),C(E,{style:{height:"20.7vh"}},{default:g(()=>[t("div",Ut,[(r(),h(q,null,x(d,(b,D)=>t("div",{key:D,class:Q(["item",{active:u(_)===D}]),onClick:F=>k(D)},c(b),11,Xt)),64))])]),_:1}))}},te=$(Zt,[["__scopeId","data-v-60cdcdf3"]]);const ee={class:"main"},ae={__name:"index",setup(n){return(_,d)=>(r(),h("div",ee,[f(St),f(Qt),f(te)]))}},ie=$(ae,[["__scopeId","data-v-aff16111"]]);export{ie as default};
