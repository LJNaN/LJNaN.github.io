import{_ as D,r,z as A,B as R,S as d,b as p,c as _,a as h,e as f,u as m,w as B,v as T,F as y,g as $,f as b,h as j,d as a,t as n,n as N,C as w,p as P,i as z}from"./index-4487308c.js";import{S as E,_ as F}from"./singleActive-4499948f.js";const Q=o=>(P("data-v-34dabe54"),o=o(),z(),o),V={class:"alert-detail-item"},G={class:"detail-top"},O={class:"detail-top-left"},W=Q(()=>a("img",{src:F},null,-1)),q={class:"detail-center"},H={class:"detail-bottom"},J=["onClick"],K={__name:"alertAndRoam",props:{type:String},setup(o){const{type:s}=o,{appContext:{app:{config:{globalProperties:{$isOurSite:S}}}}}=$();let u=r(0),c=r([]),v=r(!1);const L={text:"预警信息",style:{right:"1%",top:"3%",width:"10vw",height:"5vh"}};g();async function g(){if(s==="home"||s==="regionalRisk"){let t=[];S?t=s==="home"?{list:w.getRyyjList}:{list:w.getQyyjList}:t=await(s==="home"?A().catch(()=>({list:[]})):R().catch(()=>({list:[]}))),d.alertList=x(t),c.value=[...d.alertList],u.value=d.alertList.length}}function x(t){return t.list.reduce((l,e)=>(l.push({position:s==="home"?e.workLocation||"--":e.warnLocation||"--",time:s==="home"?e.createDate||"--":e.warnTime||"--",item1:s==="home"?e.warnPerson||"--":e.warnType||"--",item2:s==="home"?`${e.belongPost||""}|${e.belongTeam||""}|${e.belongGroup||""}`:e.levelIndicators||"",describe:e.warnDescribe||""}),l),[])}function C(t){(t.text="预警信息")&&(v.value=t.active,t.active&&g())}function k(t){const l=c.value.findIndex(e=>e.id===t);l>=0&&c.value.splice(l,1)}return(t,l)=>{const e=b("el-badge"),I=b("el-scrollbar");return p(),_(y,null,[h(e,{value:m(u),class:"alert"},{default:f(()=>[h(E,{options:L,onBtnClick:C})]),_:1},8,["value"]),B(h(I,{class:"alert-detail"},{default:f(()=>[(p(!0),_(y,null,j(m(c),i=>(p(),_("div",V,[a("div",G,[a("div",O,[W,a("p",null,n(i.position),1)]),a("p",{class:"detail-top-right",style:N({minWidth:o.type==="home"?"":"30%"})},n(i.time),5)]),a("div",q,[a("p",null,n((o.type==="home"?"预警人员:":"预警类别: ")+i.item1),1),a("p",null,n((o.type==="home"?"":"预警项: ")+i.item2),1)]),a("p",H,n(i.describe),1),a("div",{class:"alert-detail-close",onClick:M=>k(i.id)},null,8,J)]))),256))]),_:1},512),[[T,m(v)]])],64)}}},Y=D(K,[["__scopeId","data-v-34dabe54"]]);export{Y as a};
